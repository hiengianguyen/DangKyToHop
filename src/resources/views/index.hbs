<head>
    <link rel="stylesheet" href="/css/welcome.css">
</head>

<div class="containers flex">
    <div class="welcome-page flex">
        <div class="text">
          <h1>Đăng Ký Tổ Hợp</h1>
          <p>Website hỗ trợ đăng ký tổ hợp vào lớp 10</p>
          <p>Trường THPT Duy Tân, Tam Kỳ, Quảng Nam.</p>
        </div>
        <div class="login-form">
            <div class="tabs">
                <div class="tab" onclick="switchTab('login')">Đăng nhập</div>
                <div class="tab active" onclick="switchTab('register')">Đăng ký</div>
            </div>
            <div id="login" class="form-container">
                <form action="/auth/signin" method="POST">
                    <div>
                    <input type="text" name="phone" placeholder="Số điện thoại">
                    <input type="password" name="password" placeholder="Mật khẩu">
                    </div>
                    <button type="submit">Đăng nhập</button>
                </form>
            </div>
            <div id="register" class="form-container active">
                <form action="/auth/signup" method="POST">
                    <div class="register-form">
                        <div class="form-group">
                            <select class="form-select form-select-district" name="district" aria-label="Default select example" required>
                                <option selected value="">-- Bạn ở đâu trên địa bàn tỉnh Quảng Nam --</option>
                                {{#each districts}}
                                    <option value="{{this}}">{{this}}</option>
                                {{/each}}
                            </select>
                        </div>
                        <div class="form-group">
                        <select class="form-select form-select-school" name="secondarySchool" aria-label="Default select example" required>
                            <option selected value="">-- Trường học cấp 2 của bạn là --</option>
                        </select>
                        </div>
                        <div class="form-group">
                            <input type="text" name="fullName" placeholder="Họ và tên của bạn">
                        </div>
                        <div class="form-group">
                            <input type="text" name="dayOfBirth" placeholder="Ngày tháng năm sinh của bạn">
                        </div>
                        <div class="form-group">
                            <input type="text" name="phone" placeholder="Số điện thoại liên hệ">
                        </div>
                        <div class="form-group">
                            <input type="text" name="password" placeholder="Mật khẩu">
                        </div>
                    </div>
                        <button type="submit">Đăng ký</button>
                    </form>
            </div>
        </div>
      
    </div>
</div>

<script>
    function switchTab(tab) {
        document.querySelectorAll('.form-container').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
        
        let selectedTab = document.getElementById(tab);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        let selectedTabButton = document.querySelector(`.tab[onclick="switchTab('${tab}')"]`);
        if (selectedTabButton) {
            selectedTabButton.classList.add('active');
        }

    }

    const selectDistrict = document.querySelector(".form-select-district")
    const selectSchool = document.querySelector(".form-select-school")

    selectDistrict.onchange = (e) => {
        selectSchool.innerHTML = ""
        const district = e.target.value
        const data = {{{secondarySchools}}}
        const result = data.filter((doc) => {
            return doc.district === district;
        })[0]
        if(result) {
            selectSchool.innerHTML = "<option selected value=''>-- Trường học cấp 2 của bạn là --</option>"
            const secondarySchools = result.schools;
            secondarySchools.forEach((school) => {
                const option = document.createElement('option');
                option.value = school;
                option.textContent = school;
                selectSchool.appendChild(option);
            })
        } else {
            selectSchool.innerHTML = "<option selected value=''>-- Trường học cấp 2 của bạn là --</option>"
        }
        
    }

    
        

</script>